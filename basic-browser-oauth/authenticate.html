<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ArcGIS Rest JS OAuth redirect</title>
</head>

<body>
  <script src="config.js"></script>
  <script type="module">
    import { ArcGISIdentityManager } from "https://cdn.skypack.dev/@esri/arcgis-rest-request@4.0.0";

    let opts = {
      clientId: config.clientId,
      redirectUri: config.redirectUri,
      popup: true,
    }

    if (config.portal) {
      opts.portal = config.portal
    }

    ArcGISIdentityManager.completeOAuth2(opts);
  </script>
</body>

</html>